{% extends "layouts/base.html" %}

{% block title %} Final Analyze {% endblock %}

{% block content %}
<div class="pcoded-main-container">
    <div class="pcoded-content">
        <!-- [ breadcrumb ] start -->
        <div class="page-header">
            <div class="page-block">
                <div class="row align-items-center">
                    <div class="col-md-12">
                        <div class="page-header-title">
                            <h5 class="m-b-10">최종 필터링 결과</h5>
                        </div>
                        <ul class="breadcrumb">
                            <li class="breadcrumb-item"><a href="/"><i class="feather icon-home"></i></a></li>
                            <li class="breadcrumb-item"><a href="#">Case</a></li>
                            <li class="breadcrumb-item"><a href="#">Analyze</a></li>
                            <li class="breadcrumb-item"><a href="#">Filtering</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        <!-- [ breadcrumb ] end -->
        <!-- [ Main Content ] start -->
        <div class="row">
            <div class="col-sm-12">
                <div class="card">
                    <table class="table table-bordered">
                        <tr>
                            <th>No</th>
                            <th>사건 유형</th>
                            <td>행위 대상</td>
                            <th>시간대</th>
                            <th>설명</th>
                        </tr>
                        {% for i in usb_results %}
                            <tr>
                                <td>
                                    {{loop.index}}
                                </td>
                                <td>
                                    <p>기술 유출</p>
                                </td>
                                <td>
                                    <p>USB</p>
                                </td>
                                <td>
                                    {{i['Start']}}
                                </td>
                                <td>
                                    {{i['Accessed_File_List']}}
                                </td>
                            </tr>
                        {% endfor %}
                        {% for i in printer_results %}
                            <tr>
                                <td>
                                    {{loop.index}}
                                </td>
                                <td>
                                    <p>기술 유출</p>
                                </td>
                                <td>
                                    <p>프린터</p>
                                </td>
                                <td>
                                    {{i['Print_Event_Date']}}
                                </td>
                                <td>
                                    {{i['Accessed_File_List']}}
                                </td>
                            </tr>
                        {% endfor %}
                    </table>
                </div>
                
            </div>
        </div>
        <!-- [ Main Content ] end -->
    </div>
</div>

{% endblock content %}

{% block javascripts %}
<script>
    // Add event listener to capture the case ID when the delete button is clicked
    document.addEventListener('DOMContentLoaded', function() {
        var deleteModal = document.getElementById('deleteModal');
        deleteModal.addEventListener('show.bs.modal', function(event) {
            var button = event.relatedTarget; // Button that triggered the modal
            var caseId = button.getAttribute('data-case-id'); // Extract case ID from data attribute
            var caseIdInput = document.getElementById('caseIdToDelete'); // Hidden input field in the form
            caseIdInput.value = caseId; // Set the case ID in the form input
        });
    });
</script>
{% endblock javascripts %}
